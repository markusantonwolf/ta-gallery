"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function _iterableToArrayLimit(t,e){var i=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=i){var s,a,n=[],o=!0,l=!1;try{for(i=i.call(t);!(o=(s=i.next()).done)&&(n.push(s.value),!e||n.length!==e);o=!0);}catch(t){l=!0,a=t}finally{try{o||null==i.return||i.return()}finally{if(l)throw a}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}document.addEventListener("alpine:init",function(){Alpine.data("taGallery",function(){return{el:{},previous_slide:0,active_slide:0,next_slide:0,loaded:!1,modal:!1,timing:0,interval:!1,autoplay:!1,class_names:{ri:"ta-gallery-anim-right-in",ro:"ta-gallery-anim-right-out",li:"ta-gallery-anim-left-in",lo:"ta-gallery-anim-left-out"},options:{item:"ta-gallery-element",size:"ta-gallery-size",active:"ta-gallery-element-active",lazy:"ta-gallery-image-lazy",minHeight:"10rem",start:0,duration:"0.3s",origin:"center center",timing:"ease-in-out",autoplay:!1,interval:5e3,pauseonhover:!0},elements:[],init:function(){var t=this;this.el=this.$el;for(var e=0,i=Object.entries(this.el.dataset);e<i.length;e++){var s=_slicedToArray(i[e],2),a=s[0],n=s[1];void 0!==this.options[a]&&(this.options[a]=n)}this.options.start=parseInt(this.options.start),this.options.start>0&&(this.options.start-=1),this.options.automatically="true"===String(this.options.automatically).toLowerCase(),this.options.pauseonhover="true"===String(this.options.pauseonhover).toLowerCase(),this.options.timing=parseInt(this.options.timing),this.setDuration(this.options.duration),this.setOrigin(this.options.origin),this.setTiming(this.options.timing),this.el.classList.contains(this.options.size)&&"false"!=this.options.minHeight&&this.setMinHeight(this.options.minHeight);var o=null,l="",r=0;if(["height","width","size"].forEach(function(e){if(void 0!==t.$refs[e])return l=e,o=t.$refs[e],void("IMG"!==t.$refs[e].nodeName&&(o=t.$refs[e].querySelector("img")))}),null!==o&&!o.classList.contains(this.options.item)){var h=new Image;h.src=o.src,h.onload=function(e){t.setSize(l,e.target)}}this.el.querySelectorAll("."+this.options.item).forEach(function(e){t.elements.push(e);var i=e.querySelector("img");if(null!==i){var s=!1;i.classList.contains(t.options.lazy)&&void 0!==i.dataset.src&&(s=!0,t.setMinHeight(t.options.minHeight));var a=new Image;a.onload=function(e){++r>=t.elements.length&&(t.loaded=!0);var a=e.target.src;s&&setTimeout(function(e){i.classList.remove(t.options.lazy),i.src=a},0),null!==o&&o.src===a&&t.setSize(l,e.target)},a.src=s?i.dataset.src:i.src,e.addEventListener("animationend",function(t){var e=t.animationName.split("-");e[2]="anim",t.target.classList.remove(e.join("-"))})}else++r>=t.elements.length&&(t.loaded=!0)}),this.elements[this.options.start].classList.add(this.options.active),this.active_slide=this.options.start,this.previous_slide=this.getPrevious(),this.next_slide=this.getNext(),this.options.autoplay&&this.setAutoplay(),this.$watch("modal",function(e){var i="ta-gallery-modal-hide",s={show:hide,index:t.active_slide,src:t.elements[t.active_slide].src};!0===e&&(i="ta-gallery-modal-show",s.show=!0);var a=new CustomEvent(i,{detail:s});window.dispatchEvent(a)})},next:function(){this.previous_slide=this.active_slide,this.active_slide=this.getNext(),this.next_slide=this.getNext(),this.elements[this.active_slide].classList.remove(this.class_names.lo,this.class_names.li,this.class_names.ro),this.elements[this.active_slide].classList.toggle(this.options.active),this.elements[this.previous_slide].classList.toggle(this.options.active),this.elements[this.active_slide].classList.add(this.class_names.ri),this.elements[this.previous_slide].classList.add(this.class_names.ro),this.elements[this.previous_slide].classList.remove(this.class_names.lo,this.class_names.li,this.class_names.ri),this.timing=0},previous:function(){this.previous_slide=this.active_slide,this.active_slide=this.getPrevious(),this.next_slide=this.getNext(),this.elements[this.active_slide].classList.remove(this.class_names.ri,this.class_names.ro,this.class_names.lo),this.elements[this.active_slide].classList.toggle(this.options.active),this.elements[this.previous_slide].classList.toggle(this.options.active),this.elements[this.active_slide].classList.add(this.class_names.li),this.elements[this.previous_slide].classList.add(this.class_names.lo),this.elements[this.previous_slide].classList.remove(this.class_names.ri,this.class_names.ro,this.class_names.li),this.timing=0},stop:function(){clearInterval(this.interval)},pause:function(){this.autoplay=!1},resume:function(){this.autoplay=!0},togglePlay:function(){this.autoplay=!this.autoplay},toggleModal:function(){this.modal=!this.modal},getNext:function(){return this.elements.length>this.active_slide+1?this.active_slide+1:0},getPrevious:function(){return this.active_slide-1>=0?this.active_slide-1:this.elements.length-1},focusIsChild:function(){return this.el.contains(document.activeElement)},setMinHeight:function(t){this.el.style.setProperty("--ta-gallery-min-height",t)},setDuration:function(t){this.el.style.setProperty("--ta-gallery-anim-duration",t)},setOrigin:function(t){this.el.style.setProperty("--ta-gallery-anim-origin",t)},setTiming:function(t){this.el.style.setProperty("--ta-gallery-anim-timing",t)},setSize:function(t,e){var i=e.naturalWidth/e.naturalHeight;"height"===t?this.el.style.setProperty("--ta-gallery-height",e.height+"px"):"width"===t?(this.el.style.setProperty("--ta-gallery-width",e.width+"px"),this.el.style.setProperty("--ta-gallery-height",Math.floor(e.width/i)+"px")):"size"===t&&(this.el.style.setProperty("--ta-gallery-width",e.width+"px"),this.el.style.setProperty("--ta-gallery-height",e.height+"px"))},setAutoplay:function(){var t=this;this.autoplay=!0,this.interval=setInterval(function(){!1!==t.autoplay&&(t.timing+=1e3,t.timing>=t.options.interval&&(t.timing=0,t.next()))},1e3),this.options.pauseonhover&&(this.el.addEventListener("mouseover",function(){t.autoplay=!1}),this.el.addEventListener("mouseout",function(){t.focusIsChild()||(t.autoplay=!0)})),window.addEventListener("focus",function(){t.focusIsChild()||(t.autoplay=!0)}),window.addEventListener("blur",function(){t.autoplay=!1})}}})});